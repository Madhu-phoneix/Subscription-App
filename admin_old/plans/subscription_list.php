<div class="search-form">
   <div id="subscription-list-search">
      <div class="formbox">
         <div class="plan-heading">
           <h3>My Plans</h3>
         </div>
         <div class="Polaris-ButtonGroup Polaris-ButtonGroup--segmented" data-buttongroup-segmented="true">
            <div class="Polaris-ButtonGroup__Item">
               <button class="Polaris-Button select_plan_view <?php if($mainobj->subscription_plans_view == 'grid'){ echo 'sd_selectedList'; }?>" id="sd_grid_view" plan-view='grid' type="button" aria-pressed="false">
                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">
                     <metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>
                     <g><g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"><path d="M405.7,4993.2c-91.9-32.5-206.7-135.9-256.5-227.8c-42.1-80.4-42.1-82.3-42.1-1056.5c0-962.7,0-978.1,42.1-1052.7c47.9-90,122.5-162.7,216.3-212.5c63.2-34.4,128.2-36.4,1043.1-36.4c962.7,0,978,0,1052.7,42.1c90,47.8,162.7,122.5,212.5,216.3c34.4,63.2,36.4,128.2,36.4,1043.1c0,970.4,0,976.1-42.1,1054.6c-53.6,101.4-174.2,204.8-271.8,233.5C2291,5029.6,495.7,5025.8,405.7,4993.2z M2371.4,3714.7l-5.7-962.7h-957h-957l-5.7,962.7l-3.8,960.8h966.6h966.6L2371.4,3714.7z"></path><path d="M3994.4,4991.3c-105.3-36.4-204.8-122.5-254.6-222c-42.1-84.2-42.1-84.2-44-1052.7V2750l49.8-99.5c57.4-116.8,141.6-187.6,268-225.9c137.8-40.2,1862.3-40.2,1981,1.9c120.6,44,199.1,111,254.6,223.9l49.8,99.5v962.7v964.6l-47.9,93.8c-51.7,103.3-143.6,181.8-252.7,222C5891.2,5031.5,4101.6,5029.6,3994.4,4991.3z M5954.3,3708.9v-966.6h-957h-957v966.6v966.6h957h957V3708.9z"></path><path d="M7581.2,4995.1c-99.5-32.5-254.6-195.2-285.2-300.5c-17.2-65.1-21-319.6-17.2-1024c5.7-918.7,5.7-939.8,47.9-1014.4c47.8-90,122.5-162.7,216.3-212.5c63.2-34.4,128.2-36.4,1043.1-36.4c962.7,0,978,0,1052.7,42.1c90,47.8,162.7,122.5,212.4,216.3c34.5,63.2,36.4,128.2,36.4,1043.1c0,970.4,0,976.1-42.1,1054.6c-53.6,101.4-174.2,204.8-271.8,233.5C9474.1,5027.7,7676.9,5025.8,7581.2,4995.1z M9548.8,3714.7L9543,2752h-957h-957l-5.7,962.7l-3.8,960.8h966.6h966.6L9548.8,3714.7z"></path><path d="M333,1364.3c-109.1-63.2-181.8-155-216.3-277.5c-15.3-53.6-19.1-354.1-15.3-1016.3l5.7-939.8l57.4-93.8c40.2-63.2,91.9-114.8,162.7-155l103.4-63.2h978h978l103.4,63.2c70.8,40.2,122.5,91.9,162.7,155l57.4,93.8l5.7,945.5c3.8,606.7-1.9,970.4-15.3,1018.2c-30.6,112.9-122.5,225.9-229.7,279.5l-93.8,47.8h-972.3H432.5L333,1364.3z M2375.2,120.2v-957h-966.6H442.1v957v957h966.6h966.6V120.2z"></path><path d="M3954.2,1385.4c-42.1-19.1-103.4-65.1-137.8-99.5c-122.5-130.1-120.6-109.1-120.6-1169.4c0-1073.7-1.9-1045,135.9-1177.1c130.1-122.5,109.1-120.6,1169.4-120.6c1073.7,0,1045-1.9,1177.1,135.9c122.5,130.1,120.6,109.1,120.6,1165.6c0,1056.5,1.9,1035.5-120.6,1165.6c-132.1,137.8-101.4,135.9-1180.9,135.9C4095.8,1421.7,4025,1417.9,3954.2,1385.4z M5954.3,120.2v-957h-957h-957v957v957h957h957V120.2z"></path><path d="M7523.8,1375.8c-99.5-49.8-201-172.3-229.7-275.6c-30.6-112.9-24.9-1889.1,7.7-1981c40.2-109.1,118.7-201,222-252.6l93.8-47.9h972.3h972.3l99.5,57.4c109.1,63.2,164.6,130.1,206.7,250.7c42.1,118.7,42.1,1868.1,0,1986.7c-42.1,120.6-97.6,187.6-206.7,250.7l-99.5,57.4h-976.1l-976.1-1.9L7523.8,1375.8z M9552.6,120.2v-957h-966.6h-966.6v957v957h966.6h966.6V120.2z"></path><path d="M442.1-2174.6c-132.1-42.1-231.6-124.4-298.6-250.7c-34.4-63.2-36.4-128.2-36.4-1043.1c0-970.4,0-976.1,42.1-1054.6c53.6-101.5,174.2-204.8,271.8-233.5c105.3-32.5,1871.9-32.5,1981,0c49.8,15.3,114.8,59.3,176.1,120.6c145.5,145.5,145.5,143.6,137.8,1225c-5.7,853.6-7.7,924.4-42.1,985.7c-49.8,93.8-122.5,168.4-212.5,216.3c-74.6,42.1-93.8,42.1-1024,45.9C916.7-2161.2,468.9-2167,442.1-2174.6z M2371.4-3472.3l3.8-962.7h-966.6H442.1v953.2c0,524.4,5.7,960.8,13.4,966.6c5.7,7.7,440.2,11.5,960.8,9.6l949.3-5.7L2371.4-3472.3z"></path><path d="M4000.2-2184.2c-111-38.3-185.6-103.3-246.9-208.6l-57.4-99.5v-972.3V-4437l47.9-93.8c51.7-103.4,143.5-181.8,252.6-222c105.3-36.4,1896.7-36.4,2002,0c109.1,40.2,201,118.7,252.7,222l47.9,93.8v964.6v962.7l-49.8,99.5c-26.8,55.5-78.5,122.5-111,147.4c-135.9,103.3-151.2,105.3-1148.4,105.3C4287.3-2159.3,4051.8-2165.1,4000.2-2184.2z M5954.3-3468.5V-4435h-957h-957v966.6v966.6h957h957V-3468.5z"></path><path d="M7619.5-2174.6c-132.1-42.1-231.6-124.4-298.6-250.7c-34.5-63.2-36.4-132.1-42.1-1004.8c-3.8-704.3,0-958.9,17.2-1024c32.5-112.9,185.7-269.9,296.7-302.4c109.1-32.5,1875.7-32.5,1981,0c97.6,28.7,218.2,132.1,271.8,233.5c42.1,78.5,42.1,84.2,42.1,1054.6c0,914.9-1.9,980-36.4,1043.1c-49.7,93.8-122.5,168.4-212.4,216.3c-74.6,42.1-93.8,42.1-1024,45.9C8094.2-2161.2,7646.3-2167,7619.5-2174.6z M9543-3468.5v-957l-960.8-5.7l-962.7-3.8v953.2c0,524.4,5.7,960.8,13.4,966.6c5.7,7.7,440.2,11.5,960.8,9.6l949.3-5.7V-3468.5z"></path></g></g>
                  </svg>
               </button>
            </div>
            <div class="Polaris-ButtonGroup__Item">
               <button class="Polaris-Button select_plan_view <?php if($mainobj->subscription_plans_view == 'list'){ echo 'sd_selectedList'; }?>" id="sd_list_view" plan-view='list' type="button" aria-pressed="true">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><rect width="3" height="2" y="7" fill="#5C5F62" rx="1"></rect><rect width="3" height="2" y="3" fill="#5C5F62" rx="1"></rect><rect width="3" height="2" y="11" fill="#5C5F62" rx="1"></rect><rect width="3" height="2" y="15" fill="#5C5F62" rx="1"></rect><path fill="#5C5F62" d="M5 8a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1ZM5 4a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1ZM5 12a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1ZM5 16a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1Z"></path></svg>
               </button>
            </div>
         </div>
           <!-- <div class="sd_list_view" id="sd_list_view">
           <input type="radio" id="grid_view" name="select_plan_view" value="grid" <?php if($mainobj->subscription_plans_view == 'grid'){ echo 'checked'; }?>>
           <label for="grid_view">Grid view</label>
           <input type="radio" id="list_view" name="select_plan_view" value="list" <?php if($mainobj->subscription_plans_view == 'list'){ echo 'checked'; }?>>
           <label for="list_view">List view</label>
           </div> -->
      </div>
      <div class="input-box sd_plan_grid_view <?php if($mainobj->subscription_plans_view == 'list'){ echo 'display-hide-label'; }?>">
         <input type="text" placeholder="Enter Plan Name" id="search-subscription-text" class="form-control">
         <!-- <button type="button" class="search-btn" id="serach_subscription_group">Search</button> -->
         </div>
   </div>
</div>
<?php
    $store_all_subscription_plans = $mainobj->customQuery("SELECT PG.subscription_plangroup_id,PG.id , PG.store_id ,PG.plan_name ,(SELECT GROUP_CONCAT(delivery_policy, ' ', delivery_billing_type ) AS sellingplanslist FROM `subscriptionPlanGroupsDetails` as P WHERE P.subscription_plan_group_id = PG.subscription_plangroup_id) as sellingplanslist, COUNT(DISTINCT P.variant_id) as Totalproducts ,COUNT(DISTINCT D.selling_plan_id) as totalsellingplans FROM `subscriptionPlanGroups` as PG LEFT JOIN `subscriptionPlanGroupsProducts` as P ON PG.subscription_plangroup_id = P.subscription_plan_group_id LEFT JOIN `subscriptionPlanGroupsDetails` as D ON PG.subscription_plangroup_id = D.subscription_plan_group_id WHERE PG.store_id = '$mainobj->store_id' GROUP BY PG.subscription_plangroup_id, D.subscription_plan_group_id , P.subscription_plan_group_id");
?>
<div class="cardboxes sd_plan_grid_view <?php if($mainobj->subscription_plans_view == 'list'){ echo 'display-hide-label'; } ?> <?php if($store_all_subscription_plans){ echo ''; }else{ echo 'no_plan_exist'; } ?>">
   <div class="Polaris-Layout subscription-list-start sd_subscription_list sd_plan_grid_view <?php if($mainobj->subscription_plans_view == 'list'){ echo 'display-hide-label'; } ?>">
      <?php
         if($store_all_subscription_plans){
            $sd_plan_list = '';
          foreach ($store_all_subscription_plans as $store_all_subscription_plan){
            $sd_plan_list .= '<tr>
            <td class="Polaris-DataTable__Cell Polaris-DataTable__Cell--verticalAlignTop Polaris-DataTable__Cell--numeric">'.$store_all_subscription_plan['plan_name'].'</td>
            <td class="Polaris-DataTable__Cell Polaris-DataTable__Cell--verticalAlignTop Polaris-DataTable__Cell--numeric">'.$store_all_subscription_plan['totalsellingplans'].'</td>
            <td class="Polaris-DataTable__Cell Polaris-DataTable__Cell--verticalAlignTop Polaris-DataTable__Cell--numeric">'.$store_all_subscription_plan['Totalproducts'].'</td>
            <td class="Polaris-DataTable__Cell Polaris-DataTable__Cell--verticalAlignTop Polaris-DataTable__Cell--numeric">
            <button subscription-group-id="'.$store_all_subscription_plan['subscription_plangroup_id'].'" class="Polaris-Button  edit-subscription-group" type="button" data-type="edit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="10px"><path d="M14.846 1.403l3.752 3.753.625-.626A2.653 2.653 0 0015.471.778l-.625.625zm2.029 5.472l-3.752-3.753L1.218 15.028 0 19.998l4.97-1.217L16.875 6.875z" fill="#5C5F62"></path></svg></button>
            <button class="Polaris-Button delete_subscription_plan"  subscription-group-id="'.$store_all_subscription_plan['subscription_plangroup_id'].'"  data-id="'.$store_all_subscription_plan['id'].'" type="button">
               <span class="Polaris-Button__Content">
                  <span class="Polaris-Button__Text">
                     <svg width="20" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M14 4h3a1 1 0 011 1v1H2V5a1 1 0 011-1h3V1.5A1.5 1.5 0 017.5 0h5A1.5 1.5 0 0114 1.5V4zM8 2v2h4V2H8zM3 8h14v10.5a1.5 1.5 0 01-1.5 1.5h-11A1.5 1.5 0 013 18.5V8zm4 3H5v6h2v-6zm4 0H9v6h2v-6zm2 0h2v6h-2v-6z" fill="#5C5F62"/>
                     </svg>
                  </span>
               </span>
            </button></td>
            </tr>';
            $sellingPlanList_array =  explode("," ,$store_all_subscription_plan['sellingplanslist']);
      ?>
     <div data-search-planname="<?php echo $store_all_subscription_plan['plan_name']; ?>" id="subscription_list_<?php echo $store_all_subscription_plan['subscription_plangroup_id']; ?>" class="subscription-list-card Polaris-Layout__Section Polaris-Layout__Section--oneHalf subscription_list_<?php echo $store_all_subscription_plan['subscription_plangroup_id']; ?>">
         <div class="Polaris-Card">
		 <div class="sd-upper-wrapper">
            <div class="Polaris-Card__Header">
               <div class="Polaris-Stack Polaris-Stack--alignmentCenter">
                  <div class="Polaris-Stack__Item Polaris-Stack__Item--fill">
                     <h2 class="Polaris-Heading subscription_heading"><span class="list_planname" ><?php echo $store_all_subscription_plan['plan_name']; ?></span><span plan-name-value="<?php echo $store_all_subscription_plan['plan_name']; ?>" subscription-group-id="<?php echo $store_all_subscription_plan['subscription_plangroup_id']; ?>" class="change_plan_name">
                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="10px"><path d="M14.846 1.403l3.752 3.753.625-.626A2.653 2.653 0 0015.471.778l-.625.625zm2.029 5.472l-3.752-3.753L1.218 15.028 0 19.998l4.97-1.217L16.875 6.875z" fill="#5C5F62"></path></svg>
                     </span>
                  </h2>
					 <div class="planname_input_wrapper display-hide-label" />
					 <input type="text" value="<?php echo $store_all_subscription_plan['plan_name']; ?>" name="subscription_heading" maxlength="<?php echo $mainobj->input_max_character; ?>"  class="subscription_plan_name restrict_input_single_quote" />
					 <img  src = "<?php echo $mainobj->image_folder; ?>MobileCancelMajor.svg" class="plan_name_actions cancel_plan_name" />
					 <img class = "plan_name_actions save_plan_name" case-type="list" subscription-group-id="<?php echo $store_all_subscription_plan['subscription_plangroup_id'] ?>" src="<?php echo $mainobj->image_folder; ?>MobileAcceptMajor.svg" />
					 </div>
               </div>
               </div>
            </div>
            <div id="mini_<?php echo $store_all_subscription_plan['subscription_plangroup_id']; ?>" class="subscription_mini_inner_wrapper" >
            <div class="Polaris-Card__Section inner-box-cont bot-bx">
                  <div class="Polaris-Card__SectionHeader box-header">
                  <a href="javascript:;" class="edit-subscription-group" subscription-group-id="<?php echo $store_all_subscription_plan['subscription_plangroup_id'] ?>"> <h3 aria-label="Items" class="Polaris-Subheading sd_sellingplans" data-type="selling_plans">Selling plans</h3>
                     <div class="Polaris-ButtonGroup"></a>
                        <div class="Polaris-ButtonGroup__Item Polaris-ButtonGroup__Item--plain"><?php echo $store_all_subscription_plan['totalsellingplans']; ?></div>
                     </div>
                  </div>
                  <div class="sd_selling_plans">
              <div class="list-selling-plans-detail">Delivery Every <?php echo implode(",",array_chunk($sellingPlanList_array,3)[0]); ?></div>
                  </div>
               </div>
               <div class="Polaris-Card__Section inner-box-cont">
                  <div class="Polaris-Card__SectionHeader box-header">
                  <a href="javascript:;" class="edit-subscription-group" subscription-group-id="<?php echo $store_all_subscription_plan['subscription_plangroup_id'] ?>" data-type="products"><h3 aria-label="Items" class="Polaris-Subheading sd_sellingplans">Products</h3>
                     <div class="Polaris-ButtonGroup"></a>
                        <div class="Polaris-ButtonGroup__Item Polaris-ButtonGroup__Item--plain"><?php echo $store_all_subscription_plan['Totalproducts']; ?></div>
                     </div>
                  </div>
                  <div class="Polaris-ResourceList__ResourceListWrapper sd_selling_products">
                  <ul>
                </ul>
                  </div>
               </div>
            </div>
         </div><!-- header wrapper -->

            <!-- content wrapper -->
            <div class="Polaris-Card__Footer">
               <div class="Polaris-Stack Polaris-Stack--alignmentCenter">
                  <div>
                     <div class="Polaris-ButtonGroup">
                        <div class="Polaris-ButtonGroup__Item"><button subscription-group-id="<?php echo $store_all_subscription_plan['subscription_plangroup_id'] ?>" class="Polaris-Button Polaris-Button--primary light-bg sd_button  edit-subscription-group" type="button" data-type="edit">Edit</button></div>
                        <div class="Polaris-ButtonGroup__Item">
                           <button class="Polaris-Button remove-btn delete_subscription_plan"  subscription-group-id="<?php echo $store_all_subscription_plan['subscription_plangroup_id']; ?>"  data-id="<?php echo $store_all_subscription_plan['id'] ?>" type="button">
                              <span class="Polaris-Button__Content">
                                 <span class="Polaris-Button__Text">
                                    <svg width="20" viewBox="0 0 20 20">
                                       <path fill-rule="evenodd" d="M14 4h3a1 1 0 011 1v1H2V5a1 1 0 011-1h3V1.5A1.5 1.5 0 017.5 0h5A1.5 1.5 0 0114 1.5V4zM8 2v2h4V2H8zM3 8h14v10.5a1.5 1.5 0 01-1.5 1.5h-11A1.5 1.5 0 013 18.5V8zm4 3H5v6h2v-6zm4 0H9v6h2v-6zm2 0h2v6h-2v-6z" fill="#5C5F62"/>
                                    </svg>
                                 </span>
                              </span>
                           </button>
                        </div>
                     </div>
                     <div id="PolarisPortalsContainer"></div>
                  </div>
               </div>
            </div>
         </div>
      </div>
     <?php } ?>
     </div>
     <?php } else { ?>
     </div>
	  <div id="plan-no-list">
  <div class="Polaris-Card">
    <div class="Polaris-Card__Section">
      <div class="Polaris-EmptyState Polaris-EmptyState--withinContentContainer">
        <div class="Polaris-EmptyState__Section">
          <div class="Polaris-EmptyState__DetailsContainer">
            <div class="Polaris-EmptyState__Details">
              <div class="Polaris-TextContainer">
                <p class="Polaris-DisplayText Polaris-DisplayText--sizeSmall">Create your first plan</p>
                <div class="Polaris-EmptyState__Content">
                  <p>Start selling your products with amazing plans.</p>
                </div>
              </div>
              <div class="Polaris-EmptyState__Actions">
                <div class="Polaris-Stack Polaris-Stack--spacingTight Polaris-Stack--distributionCenter Polaris-Stack--alignmentCenter">
                  <div class="Polaris-Stack__Item"><button class="Polaris-Button Polaris-Button--primary CreateSubscriptipnGroup" type="button"><span class="Polaris-Button__Content"><span class="Polaris-Button__Text">Start Now</span></span></button></div>
                  <div class="Polaris-Stack__Item"><a class="Polaris-Button" href="<?php echo $mainobj->SHOPIFY_DOMAIN_URL; ?>/admin/video_tutorials.php?shop=<?php echo $mainobj->store; ?>" data-polaris-unstyled="true"><span class="Polaris-Button__Content"><span class="Polaris-Button__Text">Learn more</span></span></a></div>
                </div>
              </div>
            </div>
          </div>
          <div class="Polaris-EmptyState__ImageContainer"><img src="https://cdn.shopify.com/s/files/1/0262/4071/2726/files/emptystate-files.png" role="presentation" alt="" class="Polaris-EmptyState__Image"></div>
        </div>
      </div>
    </div>
  </div>
  <div id="PolarisPortalsContainer"></div>
</div>
 <?php }?>

	   <div id="no_search_result" class="display-hide-label">No matching records found.<a onclick="list_subscription_mode()">Clear search</a></div>
   </div>
   <div class="sd_plan_list_view sd_common_datatable <?php if($mainobj->subscription_plans_view == 'grid'){ echo 'display-hide-label'; } ?>">
      <div class="sd_subscription_table">
         <table class="Polaris-DataTable__Table dataTable no-footer" id="subscription_plan_table" role="grid" aria-describedby="subscriptionTable_info">
            <thead>
               <tr role="row">
                  <th data-polaris-header-cell="true" class="Polaris-DataTable__Cell Polaris-DataTable__Cell--verticalAlignTop Polaris-DataTable__Cell--firstColumn Polaris-DataTable__Cell--header sorting_disabled" scope="col" aria-sort="none" rowspan="1" colspan="1" style="width: 200px;">Plan Name</th>
                  <th data-polaris-header-cell="true" class="Polaris-DataTable__Cell Polaris-DataTable__Cell--verticalAlignTop Polaris-DataTable__Cell--firstColumn Polaris-DataTable__Cell--header sorting_disabled" scope="col" aria-sort="none" rowspan="1" colspan="1" style="width: 200px;">Selling Plans</th>
                  <th data-polaris-header-cell="true" class="Polaris-DataTable__Cell Polaris-DataTable__Cell--verticalAlignTop Polaris-DataTable__Cell--header Polaris-DataTable__Cell--numeric sorting_disabled" scope="col" aria-sort="none" rowspan="1" colspan="1" style="width: 200px;">Products</th>
                  <th data-polaris-header-cell="true" class="Polaris-DataTable__Cell Polaris-DataTable__Cell--verticalAlignTop Polaris-DataTable__Cell--header Polaris-DataTable__Cell--numeric sorting_disabled" scope="col" aria-sort="none" rowspan="1" colspan="1" style="width: 60px;">Action</th>
               </tr>
            </thead>
            <tbody>
               <?php echo $sd_plan_list; ?>
            </tbody>
         </table>
      </div>
   </div>
<script>
</script>